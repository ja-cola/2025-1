#include <stdio.h>
#include <string.h>

void encrypt(char str[], int key) {
    for (int i = 0; i < strlen(str); i++) {
        // 대문자 처리
        if (str[i] >= 'A' && str[i] <= 'Z') {
            str[i] = (str[i] - 'A' + key) % 26 + 'A';
        }
        // 소문자 처리
        else if (str[i] >= 'a' && str[i] <= 'z') {
            str[i] = (str[i] - 'a' + key) % 26 + 'a';
        }
        // 공백이나 특수문자는 건드리지 않음
    }
}

void decrypt(char str[], int key) {
    for (int i = 0; i < strlen(str); i++) {
        // 대문자 처리
        if (str[i] >= 'A' && str[i] <= 'Z') {
            str[i] = (str[i] - 'A' - key + 26) % 26 + 'A';
        }
        // 소문자 처리
        else if (str[i] >= 'a' && str[i] <= 'z') {
            str[i] = (str[i] - 'a' - key + 26) % 26 + 'a';
        }
    }
}

int main() {
    char message[100];
    int key;

    printf("=== 시저 암호(Caesar Cipher) 변환기 ===\n");
    printf("암호화할 영문 문장을 입력하세요(공백 가능): ");
    
    // 공백 포함해서 입력받기
    fgets(message, sizeof(message), stdin);
    // fgets로 입력받으면 마지막에 엔터(\n)가 들어가므로 제거
    message[strcspn(message, "\n")] = '\0';

    printf("암호 키(밀어낼 숫자, 1~25)를 입력하세요: ");
    scanf("%d", &key);

    printf("\n[원본]: %s\n", message);
    
    encrypt(message, key);
    printf("[암호화된 문장]: %s\n", message);

    decrypt(message, key);
    printf("[복호화된 문장]: %s\n", message);

    return 0;
}
